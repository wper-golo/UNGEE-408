# 划分子网的原因

ARPANET的早期，IP地址的设计确实有些不合理：
- IP地址空间的利用率很低
- 给每一个物理网络分配一个网络号会使路由表变得太大而使网络性能变坏
- 两级的IP地址不够灵活

然后就有了从主机号中借用一部分作为子网号的想法

![[image-20221114141122795.png]]
用以进一步划分的工具诞生了：**子网掩码（Netmask）**
>1985年起在IP地址中又增加了一个“子网号字段”，两极化分变成三级划分

# 如何划分子网

先看看IP经过划分之后是什么样子的
![[image-20221114141618856.png]]

需要注意：
- 划分子网是该网络内部的事情，对外仍表现为没有划分子网的网络（即**对外部网络透明**）。
- 其他网络发送给该网络内某个主机IP的数据报，仍然是根据IP数据报的**目的网络号net-id**，先找到本网络上的路由器，再按**目的网络号net-id**和**子网号subnet-id**找到目的子网

![[image-20221114143010569.png]]

优点：
- 减少了IP地址的浪费
- 使网络组织更加灵活
- 更便于维护和管理

# 子网掩码

![[image-20221114143321826.png]]

$$(IP)And(Netmask)=网络地址 $$
举例：
![[image-20221114143500699.png]]
![[image-20221114143557975.png]]

## 默认子网掩码
![[image-20221114143709999.png]]

>**注意：**
>1. 相邻路由器交换路由信息时，必须把自己所在网络的子网掩码（或子网）也告诉相邻路由器。
>2. 路由器的路由表中除了给出的目的网络以外，还必须给出该网络的子网掩码
>3. 一个路由器连接在两个子网上，就会存在两个网络地址和子网掩码

# 定长的子网掩码FLSM（Fixed Length Subnet Mask）

- 使用同一个子网掩码来划分子网
- 子网划分的方式不灵活：只能划分出$2^n$个子网（n是主机号借的）
- 每个子网所分配的IP地址数量相同，容易造成IP地址浪费
- IPv4划分子网就是采用定长的子网掩码

![[image-20221114161227691.png]]
![[image-20221114161232319.png]]

![[image-20221114161239032.png]]


