#笔记 #计算机网络 #网络层 #路由器

路由器是一种具有多个输入端口，和输出端口的专用计算机，其任务是转发分组与路由选择

## 路由选择

又称“控制部分”，其核心构成是**路由选择处理机**

路由选择处理机的作用是根据其选定的[[路由选择协议]]构造出一个路由表，然后**经常或定期**和相邻的路由器交换路由信息从而不断更新和维护路由表

如果经过路由器的数据分组是路由器之间用来交换路由信息的报文，则交付给路由选择处理机进行处理

![[image-20221031154835776.png]]



## 分组转发

分组转发部分主要分成三个部分：
- 交换结构
- 一组输入端口
	- ![[image-20221031150330757.png]]
- 一组输出端口
	- ![[image-20221031150448285.png]]

### 输入端口

1. 信号从某个端口进入路由器
2. 物理层将电信号转变为比特流，交付链路层处理
3. 链路层识别出比特流中的帧，对其进行处理（去掉帧头与帧尾），然后将其送交网络层进行处理
4. 到了网络层，数据即待转发的数据分组，路由器先识别分组首部中的目的地址，根据目的地址进行查表转发
5. 如果可以匹配到对应的转发端口，则对应端口进行转发；但如果找不到匹配的转发条目，则丢弃该数据分组

### 输出端口

1. 网络层负责更新数据分组首部字段中的某些值（如生存时间减1），然后送交数据链路层进行封装
2. 数据链路层将数据分组封装成帧，然后送交给物理层处理
3. 物理层将帧看成比特流，对应转换为电信号进行发送

>路由器端口的缓冲区：
>一般来说路由器的各端口还有缓冲区
>- 输入缓冲区用来暂存新进入路由器但还来不及处理的分组
>- 输出缓冲区用来暂存已经处理完毕但还来不及发送的分组

