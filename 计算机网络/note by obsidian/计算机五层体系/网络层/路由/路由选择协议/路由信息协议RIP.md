#笔记 #RIP

# 基本概念

RIP是内部网关协议IGP中最先得到广泛使用的协议之一，相关标准文档为RFC 1058
其要求自治系统AS内的每一个路由器都要维护从他自己到AS内每一个网络的距离记录。这**一组**距离，称为“**距离向量D-V（Distance-Vector）**”

RIP使用**跳数（Hop Count）** 作为度量（Metric）来衡量达到目的网络的距离
![[image-20221105101559245.png]]

RIP规定，“好的路由”就是到目的网络距离最短的路由，也就是通过路由器最少的路由

![[image-20221105102537898.png]]

当多条路由距离相同时，**进行负载均衡**

![[image-20221105103030898.png]]

![[image-20221105105318179.png]]

# 特点

开销小，实现简单

缺点

> 1.  RIP 限制了网络的规模，它能使用的最大距离为 15（16 表示不可达）。
>     
> 2.  路由器之间交换的路由信息是路由器中的完整路由表，因而随着网络规模的扩大，开销也就增加。
>     
> 3.  “坏消息传播得慢”，使更新过程的收敛时间过长。


# 基本工作原理

![[image-20221105105720984.png]]

## 路由表更新过程

定时发送RIP更新报文，D并不关心C到达目的网络的下一跳，只关心距离
![[image-20221105105851590.png]]

在发送报文的原有距离基础上都加1，得到新路由表
![[image-20221105105904541.png]]

新路由表与原路由表相比，短的就是好的
![[image-20221105105927386.png]]

另一个小例子
![[image-20221105105948869.png]]

# RIP存在的问题

## 坏消息传的慢

R1到N1故障，R1发送新路由表给R2，但R2刚开始不知道N1故障，先一步发送路由表
![[image-20221105111149891.png]]

路由更新信息R1先收到，以为N1修好了，就更新路由表。R2收到故障信息，但后续又被R1错误的路由表再次更新，以为N1好了
![[image-20221105111157466.png]]

最后回路收敛
![[image-20221105111211421.png]]

## 解决方案

![[image-20221105111552425.png]]

- 限制最大距离（收敛上限，超时GG）
- 立即发送更新而不是定期发送（尽可能减少因延迟导致问题）
- 传过来的路由信息不再相同的传回去（避免回环）

但问题不能从根本上解决，这是由于距离向量的本质所决定的