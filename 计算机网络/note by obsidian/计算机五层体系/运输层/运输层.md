#笔记 #计算机网络 #运输层 

# 引言

到了运输层这一层，往上是应用层，规定了各种协议用来规范网络程序与人或者网络程序之间的交互方式，往下是网络层，规定了不同网络之间的数据传输方式。那么，应用层能约定程序之间的需要交换的网络数据规范，网络层负责传输数据，怎么才能实现网络应用程序之间的数据传输呢，这就得交给传输层了。传输层又是如何传输数据的呢？

**干什么的？**
应用之间的网络数据传输

**怎么干的？**
端口，TCP/UDP

# 端口

前面网络层解决了不同网络之间的通信，数据链路层解决了同一网络间的通信问题。
假设有两个不同系统的主机，他们之间可以通过物理层、数据链路层和网络层完成不同网络之间的数据格式转换，但因为系统不同，使用的应用程序所通信的数据格式还是不同，对进程的标识也不同（如Windows和Linux对**进程标识号**（PID）的标识）

在这样的背景下，TCP/IP协议提出了[[端口]]的概念（本质是用统一的方法对不同操作系统的应用程序进行标识）

有了端口之后，还需要的就是对于数据传输的规范（协议）了

# 运输层的协议

两个对等运输实体在通信时传送的数据单位叫作**运输协议数据单元** TPDU (Transport Protocol Data Unit)。

运输层所使用的TCP/IP协议栈主要有两个运输层的协议：
- [[TCP]]
- [[UDP]]

- TCP 传送的数据单位协议是 **TCP 报文段**(segment)。
- UDP 传送的数据单位协议是 **UDP 报文**或**用户数据报**。
![[image-20221122141629753.png]]

这两种协议的区别：
- 当运输层采用面向连接的 **TCP** 协议时，尽管下面的网络是不可靠的（只提供尽最大努力服务）但这种逻辑通信信道就相当于一条**全双工的可靠信道**。
- 当运输层采用无连接的 **UDP** 协议时，这种逻辑通信信道是一条**不可靠信道**。

![[image-20221122141309056.png]]
区别就主要在于是否提供“面向连接”的“可靠传输”

- 因为TCP面向连接，TCP之间的通信必须要在两个套接字（Socket）之间建立连接
- 因为UDP通信是无连接的，所以不需要套接字


# [[运输层传输流程]]

以DNS为例的运输层工作流程