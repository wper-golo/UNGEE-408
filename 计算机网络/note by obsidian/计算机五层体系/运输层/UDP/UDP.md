用户数据报协议（User Datagram Protocol）提供面向无连接的不可靠传输。

## 可靠性

因为面向无连接，不提供可靠传输。

一个合格的[[可靠传输]]应该有
- 差错检测功能
	- 比特差错
	- 分组丢失
	- 分组乱序
	- 分组重复
- 检测差错，进行弥补功能
	- 超时重发
- 除此之外如拥塞控制、流量控制等功能

但综合分析来看，UDP只有差错检测功能。

## UDP结构

![[image-20221226173540000.png]]

较TCP简单得多得多

- 来源端口：可选字段，因为UDP不需要应答，不用时值设置为0。
- 目的端口：UDP数据报送到的目的端口
- 报文长度：指定了UDP数据报（包括头和数据部分）的长度
- 校验和：IPv4中属于可选字段，IPv6中属于必填字段。如果使用则用于校验到达目的地的UDP数据报是否发生了比特差错。

## UDP校验和的计算

### IPv4

![[image-20221226174431015.png]]

当UDP运行在IPv4之上时，为了能够计算校验和，需要在UDP数据报的头部添加一个“伪头部”。伪头部中包含了一部分IPv4头部的信息，但并不是真的使用这个头部作为IP数据包的头部，只是用来算校验和。

### IPv6

![[image-20221226174700740.png]]

同理，IPv6由于强制校验和的使用，所以也要加上伪头部。

### 校验和计算方法

需要计算的部分为：伪首部+UDP首部+数据部分

- 按每16位求和并在高位补0得出一个32位的结果
	- 如结果的高16位不为0，则高16位+低16位，高位补0，再得出一个32位结果
	- 重复上述过程，直至得出高16位为0的结果
- 再进行下次下次加过程，直至所有16位求和完毕

## UDP的应用

- DNS
- DHCP
- SNMP
- RIP
- NTP（网络时间协议）