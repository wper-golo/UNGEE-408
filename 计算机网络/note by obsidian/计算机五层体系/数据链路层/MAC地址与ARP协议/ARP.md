ARP协议本质属于网际层（[[网络层]]）协议，但其联系了网际层的IP地址（[[IPv4]]）与数据链路层的[[MAC]]地址

## ARP的流程

![[image-20221209212008651.png]]

主机B维护了一个高速ARP缓存，用于便捷快速查询IP地址与MAC地址的对应关系
![[image-20221209212107955.png]]

假如高速ARP缓存没有怎么办？
主机B发送一个ARP请求报文，获取主机C的MAC地址
![[image-20221209212226826.png]]

ARP报文封装在MAC帧中发送，目的地址为广播
目的主机接手到之后，交给上层处理，发现是自己的IP
记录发送方B主机的MAC的同时发送ARP响应
![[image-20221209212305874.png]]

由于是单播的ARP相应（还是封装在MAC帧中），所以只有B能成功接收（A能接收但不匹配地址会直接丢弃）
![[image-20221209212519129.png]]

B根据ARP响应往ARP高速缓存中存入记录
![[image-20221209212629782.png]]

**注意**
动态ARP与静态ARP高速缓存的区别
![[image-20221209212737737.png]]

ARP**仅能在同一网段使用**
![[image-20221209212816709.png]]

还有一点，ARP表中的IP地址与MAC地址的对应关系记录，会**定期删除**，因为**IP地址与MAC地址的对应关系不是永久性的**
