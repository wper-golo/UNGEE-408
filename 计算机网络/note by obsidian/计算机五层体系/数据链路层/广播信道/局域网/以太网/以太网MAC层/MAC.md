在数据链路层来看，MAC地址是以太网的MAC子层使用的地址
格局再大一点，将数据链路层和网际层联系起来，可以将IP地址（[IPv4]）、[ARP]协议、MAC地址相互关联起来

>IP地址：TCP/IP体系结构网际层所使用的地址，可以用于**区分不同网络**
>ARP协议：属于TCP/IP体系结构的网际层；作用为已知设备所分到的IP地址，利用ARP协议可以获取到该设备的MAC地址，**不具备区分不同网络的功能**

![[image-20221209210509083.png]]
如上图，当一个数据包发送到路由器时，会进行解包再封包的过程。那么再封包时路由器仅知道目的IP，下一跳路由器IP。下一跳路由器的MAC得获取后再封装，这个MAC地址又是怎么获得的呢？
[[ARP]]协议


## MAC地址

前面在[[广播信道]]时曾说到，为了对公共信道进行划分使用权，必须进行介质访问控制，那么介质访问控制又如何区分每一个不同的站点呢，这就要用到**MAC地址**

>点对点信道不需要使用MAC地址（都点对点了，没啥必要区分了）
>广播信道必须使用MAC地址
>![[image-20221209203351213.png]]
>以上，MAC地址又称为**硬件地址**或**物理地址**（这里注意，物理地址属于数据链路层，物理层没有地址）

## IEEE 802局域网所规定的MAC地址格式

![[image-20221209203534529.png]]
>组织唯一标识符OUI
>生产网络设备的厂商，需要向IEEE的注册管理机构申请一个或多个OUI
>网络接口标识符
>由获得OUI的厂商自行分配
>EUI-48
>48位MAC地址的位数（目标寿命一百年，活到2080年，现在已经有了更新的EUI-64）
![[image-20221209203804740.png]]

![[image-20221209204802902.png]]

## MAC帧

特别的，会在数据传输过程中产生无效的MAC帧：
- 数据字段的长度与长度字段不一样
- 帧的长度不是整数个字节
- 用收到的帧检验序列FCS查出有差错
- 数据字段的长度不在46~1500字节之间
- 有效的MAC帧长度为64~1518字节之间
对于无效的MAC帧，直接丢弃，以太网不负责重传丢弃的帧

## 特殊的MAC地址

### 单播MAC地址

顾名思义，就是给目的主机发送帧，所使用的MAC地址
![[image-20221209205046967.png]]

如上图，B要给C发送帧，在**帧首部的目的地址字段上填入主机C的MAC地址**，**源地址字段填上自己的MAC地址**，再加上帧首部的其他字段、数据载荷以及帧尾部，构成单播帧

![[image-20221209205256719.png]]

主机B发送单播帧，主机A和C都会收到
但A发现目的地址和自己网卡的MAC地址不匹配，就丢弃
C发现一只，接受该帧，转交上层处理

### 广播MAC地址

即发送主机希望所有能收到该帧的主机都能接收该帧

![[image-20221209205449148.png]]

还是B要发送一个广播帧，源地址字段填入自己的MAC地址，**目的MAC地址字段填入全F的广播地址**，加上其他字段，构成广播帧

![[image-20221209205606727.png]]

其他主机接受到之后，发现目的地址时广播地址，都会接受，交给上层处理

### 多播MAC地址

就是一个帧，发送的主机希望有多个主机能够接收，但不是全部，所使用的地址

![[image-20221209205924965.png]]

一般来说，MAC左起第一个地址以字节表示，**最低的比特位为1**，表示地址为多播地址

![[image-20221209210103263.png]]

每个主机（网卡）都会有归属的多播组，用于多播
比如上图，B和C有同一个多播组

![[image-20221209210156438.png]]

构建多播帧，**目的地址字段填入多播地址**

![[image-20221209210255038.png]]

目的主机收到后，查看目的地址是否为存在与自己的多播组列表中。在就接受；不在就丢弃。
